config nodes 'Splitter'
	option remarks 'Splitter'
	option type 'sing-box'
	option protocol '_shunt'
	option Block '_blackhole'
	option Direct '_direct'
	option default_node 'Ghost'
	option domainStrategy 'IPOnDemand'
	option domainMatcher 'hybrid'
	option preproxy_enabled '0'

config nodes 'Balancer'
	option remarks 'Balancer'
	option type 'sing-box'
	option protocol 'socks'
	option address '127.0.0.1'
	option port '9801'
	option transport 'tcp'

config nodes 'Ghost'
	option remarks 'Ghost'
	option type 'sing-box'
	option protocol 'socks'
	option address '127.0.0.1'
	option port '9802'
	option transport 'tcp'

config nodes 'WarpPlus'
	option remarks 'WarpPlus'
	option type 'sing-box'
	option protocol 'socks'
	option address '127.0.0.1'
	option port '9803'
	option transport 'tcp'

config nodes 'Psiphon'
	option remarks 'Psiphon'
	option type 'sing-box'
	option protocol 'socks'
	option address '127.0.0.1'
	option port '9804'
	option transport 'tcp'

config nodes 'Tor'
	option remarks 'Tor'
	option type 'sing-box'
	option protocol 'socks'
	option address '127.0.0.1'
	option port '9805'
	option transport 'tcp'

config nodes 'SshProxy'
	option remarks 'SshProxy'
	option type 'sing-box'
	option protocol 'socks'
	option address '127.0.0.1'
	option port '9806'
	option transport 'tcp'

config nodes 'ServerLess'
	option remarks 'ServerLess'
	option type 'sing-box'
	option protocol 'socks'
	option address '127.0.0.1'
	option port '10808'
	option transport 'tcp'

config global
	option enabled '1'
	option node_socks_port '9800'
	option localhost_proxy '0'
	option client_proxy '1'
	option socks_enabled '0'
	option acl_enable '0'
	option direct_dns_protocol 'auto'
	option direct_dns_query_strategy 'UseIPv4'
	option remote_dns_protocol 'tcp'
	option remote_dns_query_strategy 'UseIPv4'
	option log_node '1'
	option loglevel 'error'
	option write_ipset_direct '0'
	option remote_dns_detour 'remote'
	option remote_fakedns '0'
	option dns_redirect '0'
	option node 'Splitter'
	option node_socks_bind_local '0'
	option remote_dns '1.1.1.1'

config global_haproxy
	option balancing_enable '0'

config global_delay
	option start_daemon '1'
	option start_delay '10'

config global_forwarding
	option tcp_no_redir_ports 'disable'
	option udp_no_redir_ports 'disable'
	option tcp_redir_ports '25,53,143,465,587,853,993,995,80,443,9339'
	option udp_redir_ports '53,80,443'
	option accept_icmp '0'
	option use_nft '1'
	option tcp_proxy_way 'redirect'
	option ipv6_tproxy '0'

config global_xray
	option sniffing_override_dest '0'
	option fragment '0'
	option noise '0'

config global_other
	option auto_detection_time 'tcping'
	option show_node_info '1'

config global_rules
	option auto_update '0'
	option geosite_update '1'
	option geoip_update '1'
	option v2ray_location_asset '/usr/share/v2ray/'
	option enable_geoview '1'
	option geoip_url 'https://github.com/Chocolate4U/Iran-v2ray-rules/releases/latest/download/geoip-lite.dat'
	option geosite_url 'https://github.com/Chocolate4U/Iran-v2ray-rules/releases/latest/download/geosite-lite.dat'

config global_app
	option xray_file '/usr/bin/xray'
	option hysteria_file '/usr/bin/hysteria'
	option singbox_file '/usr/bin/sing-box'

config global_subscribe
	option filter_keyword_mode '1'
	option ss_type 'sing-box'
	option trojan_type 'sing-box'
	option vmess_type 'sing-box'
	option vless_type 'sing-box'
	option hysteria2_type 'sing-box'
	option domain_strategy 'prefer_ipv4'

config global_singbox
	option sniff_override_destination '0'
	option geoip_path '/usr/share/singbox/geoip.db'
	option geoip_url 'https://github.com/Chocolate4U/Iran-sing-box-rules/releases/latest/download/geoip-lite.db'
	option geosite_path '/usr/share/singbox/geosite.db'
	option geosite_url 'https://github.com/Chocolate4U/Iran-sing-box-rules/releases/latest/download/geosite-lite.db'
	option record_fragment '0'
	option fragment '0'

config shunt_rules 'Block'
	option remarks 'Block'
	option network 'tcp,udp'
	option domain_list 'rule-set:local:/usr/share/singbox/rule-set/geosite-adguard.srs'
	option ip_list 'rule-set:local:/usr/share/singbox/rule-set/geoip-malware.srs
rule-set:local:/usr/share/singbox/rule-set/geoip-phishing.srs'

config shunt_rules 'Direct'
	option remarks 'Direct'
	option network 'tcp,udp'
	option domain_list 'rule-set:local:/usr/share/singbox/rule-set/geosite-direct.srs'
	option ip_list 'rule-set:local:/usr/share/singbox/rule-set/geoip-ir.srs
rule-set:local:/usr/share/singbox/rule-set/geoip-private.srs'
